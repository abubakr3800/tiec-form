Registration and Login Scenario
==============================

1. User visits register.php
   - If a 'user_token' cookie exists, the user is redirected to success.php?token={cookie value}.
   - If not, the registration form is shown.

2. User fills out the registration form and submits it.

3. save_user.php processes the form:
   - Checks the database for existing national_id or email. If found, shows an error and stops.
   - Generates a random user_token (e.g., bin2hex(random_bytes(16))).
   - Generates a cookie_token as md5(user_token . time()).
   - Inserts all user data, including user_token and cookie_token, into the participants table.
   - Sets a cookie 'user_token' with the value of cookie_token.
   - Redirects the user to success.php?token={cookie_token}.

4. User lands on success.php:
   - The page looks up the user in the database by cookie_token (using the token from the URL or cookie).
   - If found, displays a welcome message, the user's info, and a QR code generated from the cookie_token.
   - If not found, shows an error message.

5. If the user tries to register again from the same browser:
   - The cookie is still present, so register.php redirects them to their success page.

6. Duplicate prevention:
   - Registration is blocked if the national_id or email already exists in the database.

7. QR code:
   - The QR code shown on the success page encodes the cookie_token, which can be used to look up the user later.

8. Admin pages:
   - Admins can view, search, and export registrations, and see both user_token and cookie_token for each user. 