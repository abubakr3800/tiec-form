# نظام TIEC - منصة إدارة الخدمات التدريبية والاستشارية

## 🎯 نظرة عامة على النظام

نظام TIEC عبارة عن منصة شاملة لإدارة الخدمات التدريبية والاستشارية في Technology Innovation and Entrepreneurship Center (TIEC)، مع نظام تسجيل ذكي وحضور آلي. النظام مصمم لخدمة الطلاب والخريجين والشركات الناشئة والمهنيين.

## 🚀 الميزات الرئيسية

### 📝 نظام التسجيل الذكي
- **نموذج تسجيل ثنائي اللغة** (عربي/إنجليزي) مع واجهة حديثة
- **تحقق من البيانات** ومنع التسجيل المكرر
- **إنشاء رمز QR فريد** لكل مشارك للوصول السريع
- **أسئلة ديناميكية** حسب نوع الخدمة المختارة
- **نظام Token** للتسجيل السريع بدون إعادة إدخال البيانات

### 🎓 أنواع الخدمات المتاحة

#### 1. التدريبات المتاحة (Training)
- تدريبات مهنية مع مدربين متخصصين
- مواعيد ثابتة وسعة محدودة
- أسئلة مخصصة حسب نوع التدريب
- تتبع الحضور والغياب

#### 2. الاستشارات الفردية (Mentoring)
- استشارات للأفراد والشركات
- جلسات استشارية للطلاب والخريجين
- مواعيد مرنة حسب الحاجة
- أسئلة حول مجال الاستشارة

#### 3. معمل التصنيع الرقمي (FabLab)
- حجز فترات عمل لتنفيذ المشاريع
- معدات متاحة للاستخدام
- أسئلة حول المشروع المطلوب
- تتبع استخدام المعدات

#### 4. مساحة العمل الحرة (Co-Working Space)
- حجز مساحات عمل للعمل المشترك
- فترات زمنية مرنة
- أسئلة حول نوع العمل
- إدارة المساحات المتاحة

### 📱 نظام الحضور الذكي
- **QR Scanner** لتسجيل الحضور
- **البحث بالرقم القومي** كبديل للـ QR
- **تتبع الحضور والغياب** تلقائياً
- **تقارير تفصيلية** للحضور

### 👥 إدارة المستخدمين
- **نظام مشرفين** مع صلاحيات مختلفة
- **إدارة المدربين** والمتخصصين
- **تسجيل دخول آمن** مع تشفير كلمات المرور
- **إدارة الأدوار والصلاحيات**

### 📊 لوحة التحكم المتقدمة
- **إحصائيات شاملة** للنظام
- **جداول تفاعلية** مع DataTables
- **تصدير البيانات** (Excel, PDF, طباعة)
- **بحث وفلترة متقدم**

## 🏗️ هيكل قاعدة البيانات

### الجداول الرئيسية

#### جدول `participants` (المشاركين)
```sql
- id (PK) - المعرف الفريد
- name - الاسم الكامل
- national_id (unique) - الرقم القومي
- phone - رقم الهاتف
- email - البريد الإلكتروني
- governorate - المحافظة
- gender - الجنس (male/female)
- age - العمر
- participant_type - نوع المشارك (student/employee/other)
- university - الجامعة (للطلاب)
- education_stage - المرحلة التعليمية
- faculty - الكلية
- work_employer - جهة العمل (للموظفين)
- qr_code (unique) - رمز QR فريد
- created_at - تاريخ الإنشاء
- updated_at - تاريخ التحديث
```

#### جدول `services` (الخدمات)
```sql
- id (PK) - المعرف الفريد
- name_ar - اسم الخدمة بالعربي
- name_en - اسم الخدمة بالإنجليزي
- description_ar - وصف الخدمة بالعربي
- description_en - وصف الخدمة بالإنجليزي
- service_type - نوع الخدمة (training/mentoring/fablab/coworking)
- is_active - حالة التفعيل
- sort_order - ترتيب العرض
- created_at - تاريخ الإنشاء
- updated_at - تاريخ التحديث
```

#### جدول `trainers` (المدربين)
```sql
- id (PK) - المعرف الفريد
- name_ar - اسم المدرب بالعربي
- name_en - اسم المدرب بالإنجليزي
- email - البريد الإلكتروني
- phone - رقم الهاتف
- specialization - التخصص
- bio_ar - السيرة الذاتية بالعربي
- bio_en - السيرة الذاتية بالإنجليزي
- is_active - حالة التفعيل
- created_at - تاريخ الإنشاء
- updated_at - تاريخ التحديث
```

#### جدول `trainings` (التدريبات)
```sql
- id (PK) - المعرف الفريد
- service_id (FK) - معرف الخدمة
- trainer_id (FK) - معرف المدرب
- title_ar - عنوان التدريب بالعربي
- title_en - عنوان التدريب بالإنجليزي
- description_ar - وصف التدريب بالعربي
- description_en - وصف التدريب بالإنجليزي
- start_date - تاريخ البداية
- end_date - تاريخ النهاية
- start_time - وقت البداية
- end_time - وقت النهاية
- max_participants - الحد الأقصى للمشاركين
- current_participants - عدد المشاركين الحالي
- is_active - حالة التفعيل
- created_at - تاريخ الإنشاء
- updated_at - تاريخ التحديث
```

#### جدول `registrations` (التسجيلات)
```sql
- id (PK) - المعرف الفريد
- participant_id (FK) - معرف المشارك
- service_id (FK) - معرف الخدمة
- training_id (FK) - معرف التدريب (اختياري)
- registration_date - تاريخ التسجيل
- status - الحالة (pending/confirmed/cancelled)
- created_at - تاريخ الإنشاء
- updated_at - تاريخ التحديث
```

#### جدول `attendance` (الحضور)
```sql
- id (PK) - المعرف الفريد
- registration_id (FK) - معرف التسجيل
- attendance_date - تاريخ الحضور
- check_in_time - وقت تسجيل الحضور
- check_out_time - وقت تسجيل الانصراف
- status - الحالة (present/absent/late)
- notes - ملاحظات
- created_at - تاريخ الإنشاء
- updated_at - تاريخ التحديث
```

## 🎬 سيناريوهات الاستخدام

### سيناريو 1: تسجيل جديد
1. **المستخدم يدخل الموقع** (`index.php`)
2. **يختار نوع الخدمة** (تدريب، استشارة، فاب لاب، مساحة عمل)
3. **تظهر أسئلة مخصصة** للخدمة المختارة
4. **يملأ البيانات الشخصية** (الاسم، الرقم القومي، المحافظة، إلخ)
5. **يختار نوع المشارك** (طالب، موظف، أخرى)
6. **تظهر حقول إضافية** حسب النوع (جامعة، كلية، جهة عمل)
7. **يتم إنشاء رمز QR فريد** تلقائياً
8. **يتم حفظ التسجيل** مع جميع الإجابات
9. **يظهر رمز QR** للمشارك للاحتفاظ به

### سيناريو 2: تسجيل بواسطة Token
1. **المستخدم يدخل Token** (`token_login.php`)
2. **النظام يتحقق من صحة الـ Token**
3. **يظهر بياناته المحفوظة** تلقائياً
4. **يمكنه التسجيل في خدمة جديدة** بدون إعادة إدخال البيانات
5. **يتم ربط التسجيل الجديد** بنفس المشارك

### سيناريو 3: تسجيل الحضور
1. **المدير يفتح صفحة QR Scanner** (`attendance_scanner.php`)
2. **المشارك يمسح QR code** أو يدخل الرقم القومي
3. **النظام يتحقق من وجود تسجيل** في تاريخ اليوم
4. **يتم تسجيل الحضور تلقائياً** مع الوقت
5. **يظهر تأكيد الحضور** للمشارك

### سيناريو 4: إدارة النظام (للمديرين)
1. **المدير يسجل دخول** (`admin/login.php`)
2. **يصل للوحة التحكم** (`admin/index.php`)
3. **يدير الخدمات والتدريبات** (`admin/services_manager.php`)
4. **يضيف المدربين** (`admin/trainers.php`)
5. **يتابع الحضور** (`admin/attendance_manager.php`)
6. **يستخرج التقارير** والبيانات

## 🗺️ خريطة التنقل في الصفحات

### 📱 واجهة المشاركين (Frontend)

#### 1. صفحة التسجيل الرئيسية
- **الرابط**: `index.php`
- **الوصف**: صفحة التسجيل الجديد مع نموذج شامل
- **الميزات**: 
  - نموذج ثنائي اللغة (عربي/إنجليزي)
  - أسئلة ديناميكية حسب الخدمة
  - إنشاء رمز QR فريد
- **الانتقال إلى**: 
  - `process_registration.php` (عند الإرسال)
  - `already_registered.php` (إذا كان مسجل مسبقاً)

#### 2. صفحة تسجيل الدخول بالـ Token
- **الرابط**: `token_login.php`
- **الوصف**: تسجيل دخول باستخدام الرمز المميز
- **الميزات**:
  - إدخال الرمز المميز
  - عرض بيانات المشارك
  - قائمة الخدمات المتاحة
- **الانتقال إلى**:
  - `index.php` (تسجيل جديد)
  - `attendance_scanner.php` (تسجيل الحضور)

#### 3. صفحة عرض التسجيلات
- **الرابط**: `view_my_registrations.php`
- **الوصف**: عرض جميع تسجيلات المشارك
- **الميزات**:
  - قائمة التسجيلات السابقة
  - تفاصيل كل تسجيل
  - سجل الحضور

#### 4. صفحة تسجيل الحضور
- **الرابط**: `attendance_scanner.php`
- **الوصف**: QR Scanner لتسجيل الحضور
- **الميزات**:
  - مسح رمز QR
  - إدخال الرقم القومي
  - تسجيل الحضور تلقائياً
- **الانتقال إلى**:
  - نفس الصفحة مع رسالة تأكيد

#### 5. صفحة التسجيل المكرر
- **الرابط**: `already_registered.php`
- **الوصف**: رسالة للمستخدمين المسجلين مسبقاً
- **الميزات**:
  - رسالة توضيحية
  - روابط للصفحات الأخرى

### 🖥️ لوحة التحكم (Admin Panel)

#### 1. صفحة تسجيل دخول المدير
- **الرابط**: `admin/login.php`
- **الوصف**: تسجيل دخول للمديرين
- **الميزات**:
  - نموذج تسجيل دخول آمن
  - التحقق من الصلاحيات
- **الانتقال إلى**:
  - `admin/index.php` (لوحة التحكم الرئيسية)

#### 2. لوحة التحكم الرئيسية
- **الرابط**: `admin/index.php`
- **الوصف**: الصفحة الرئيسية للوحة التحكم
- **الميزات**:
  - إحصائيات سريعة
  - قائمة المشاركين الحديثة
  - روابط سريعة للإدارة
- **الانتقال إلى**:
  - جميع صفحات الإدارة

#### 3. إدارة الخدمات
- **الرابط**: `admin/services_manager.php`
- **الوصف**: إدارة الخدمات والأسئلة
- **الميزات**:
  - إضافة/تعديل/حذف الخدمات
  - إدارة الأسئلة لكل خدمة
  - إدارة خيارات الأسئلة
- **الانتقال إلى**:
  - `admin/services_ajax.php` (AJAX)
  - `admin/questions_ajax.php` (AJAX)

#### 4. إدارة المدربين
- **الرابط**: `admin/trainers.php`
- **الوصف**: إدارة المدربين والمتخصصين
- **الميزات**:
  - إضافة/تعديل/حذف المدربين
  - عرض تفاصيل المدربين
  - إدارة التخصصات
- **الانتقال إلى**:
  - `admin/save_trainer.php` (حفظ المدرب)
  - `admin/delete_trainer.php` (حذف المدرب)

#### 5. إدارة التدريبات
- **الرابط**: `admin/trainings_manager.php`
- **الوصف**: إدارة التدريبات والمواعيد
- **الميزات**:
  - إنشاء تدريبات جديدة
  - ربط التدريبات بالمدربين
  - تحديد المواعيد والسعة
- **الانتقال إلى**:
  - `admin/trainings_ajax.php` (AJAX)
  - `admin/save_training.php` (حفظ التدريب)

#### 6. إدارة الحضور
- **الرابط**: `admin/attendance_manager.php`
- **الوصف**: تتبع الحضور والغياب
- **الميزات**:
  - عرض سجل الحضور
  - تقارير الحضور
  - إدارة الغياب
- **الانتقال إلى**:
  - `admin/attendance_ajax.php` (AJAX)

#### 7. إدارة المشاركين
- **الرابط**: `admin/participants.php`
- **الوصف**: عرض وإدارة المشاركين
- **الميزات**:
  - قائمة جميع المشاركين
  - تفاصيل كل مشارك
  - تصدير البيانات
- **الانتقال إلى**:
  - `admin/get_participants.php` (AJAX)

#### 8. إدارة المشرفين
- **الرابط**: `admin/admins.php`
- **الوصف**: إدارة المشرفين والصلاحيات
- **الميزات**:
  - إضافة/تعديل/حذف المشرفين
- إدارة الأدوار والصلاحيات
- **الانتقال إلى**:
  - `admin/save_admin.php` (حفظ المشرف)
  - `admin/delete_admin.php` (حذف المشرف)

### 🔄 مسارات التنقل الرئيسية

#### مسار المشارك الجديد:
```
index.php → process_registration.php → (QR Code) → view_my_registrations.php
```

#### مسار المشارك المسجل:
```
token_login.php → (Token) → view_my_registrations.php → attendance_scanner.php
```

#### مسار المدير:
```
admin/login.php → admin/index.php → admin/services_manager.php → admin/trainers.php → admin/trainings_manager.php → admin/attendance_manager.php
```

#### مسار تسجيل الحضور:
```
attendance_scanner.php → (QR/National ID) → (Attendance Confirmation)
```

## 🛠️ متطلبات النظام

### المتطلبات التقنية
- **PHP 7.4** أو أحدث
- **MySQL 5.7** أو أحدث
- **Apache/Nginx** web server
- **متصفح حديث** يدعم JavaScript
- **XAMPP/WAMP** للتطوير المحلي

### المتطلبات الإضافية
- **GD Library** لإنشاء رموز QR
- **PDO Extension** للاتصال بقاعدة البيانات
- **JSON Extension** لمعالجة البيانات
- **File Upload** لرفع الملفات

## 📦 التثبيت والإعداد

### 1. إعداد قاعدة البيانات

```bash
# تشغيل ملف إنشاء قاعدة البيانات
php create_complete_database.php
```

### 2. تكوين الاتصال

تعديل ملف `config/database.php`:

```php
$host = '127.0.0.1';
$db   = 'tiec_form';
$user = 'root';
$pass = '';
$charset = 'utf8mb4';
```

### 3. رفع الملفات

```bash
# رفع جميع الملفات إلى مجلد الويب سيرفر
# مثال: C:\xampp2\htdocs\Tiec\
```

### 4. إعداد الصلاحيات

```bash
# التأكد من أن مجلد uploads/ قابل للكتابة
mkdir uploads
chmod 755 uploads
```

## 🎯 كيفية الاستخدام

### للمشاركين

#### التسجيل الجديد
```
http://localhost/Tiec/index.php
```

#### تسجيل الدخول بالـ Token
```
http://localhost/Tiec/token_login.php
```

#### عرض التسجيلات
```
http://localhost/Tiec/view_my_registrations.php
```

#### تسجيل الحضور
```
http://localhost/Tiec/attendance_scanner.php
```

### للمديرين

#### لوحة التحكم الرئيسية
```
http://localhost/Tiec/admin/index.php
```

#### إدارة الخدمات
```
http://localhost/Tiec/admin/services_manager.php
```

#### إدارة المدربين
```
http://localhost/Tiec/admin/trainers.php
```

#### إدارة التدريبات
```
http://localhost/Tiec/admin/trainings_manager.php
```

#### إدارة الحضور
```
http://localhost/Tiec/admin/attendance_manager.php
```

#### إدارة المشاركين
```
http://localhost/Tiec/admin/participants.php
```

## 🔒 الأمان

### حماية البيانات
- **تشفير كلمات المرور** بـ `password_hash()`
- **التحقق من الجلسات** لمنع الوصول غير المصرح
- **حماية من SQL Injection** باستخدام Prepared Statements
- **التحقق من صحة البيانات** المدخلة
- **تشفير الـ Tokens** للوصول الآمن

### صلاحيات المستخدمين
- **مديرين (Admin)**: إدارة كاملة للنظام
- **مدربين (Trainer)**: إدارة التدريبات والحضور
- **مشاركين (Participant)**: التسجيل وعرض البيانات

## 📊 التقارير والإحصائيات

### تقارير الحضور
- **تقرير يومي**: عدد الحضور والغياب
- **تقرير شهري**: إحصائيات شهرية
- **تقرير حسب التدريب**: تفصيل كل تدريب

### إحصائيات النظام
- **عدد المشاركين**: إجمالي المسجلين
- **عدد التدريبات**: التدريبات النشطة
- **معدل الحضور**: نسبة الحضور للغياب
- **أكثر الخدمات طلباً**: ترتيب الخدمات

## 🔧 استكشاف الأخطاء

### مشاكل شائعة وحلولها

#### 1. خطأ في قاعدة البيانات
```bash
# تشغيل ملف إنشاء قاعدة البيانات
php create_complete_database.php
```

#### 2. خطأ في QR Scanner
- التأكد من دعم HTTPS أو استخدام localhost
- التحقق من إعدادات الكاميرا في المتصفح

#### 3. خطأ في الـ Token
- التحقق من إعدادات الجلسة
- التأكد من صحة الـ cookies

#### 4. خطأ في رفع الملفات
- التأكد من صلاحيات مجلد uploads/
- التحقق من حجم الملف (الحد الأقصى 10MB)

## 📈 التحسينات المستقبلية

### المرحلة الأولى (مكتملة)
- ✅ نظام التسجيل الأساسي
- ✅ نظام الحضور بالـ QR
- ✅ لوحة التحكم للمديرين
- ✅ إدارة الخدمات والمدربين

### المرحلة الثانية (قيد التطوير)
- 🔄 نظام إشعارات SMS/Email
- 🔄 تقويم تفاعلي لحجز المواعيد
- 🔄 نظام تقييم للخدمات
- 🔄 تطبيق موبايل

### المرحلة الثالثة (مستقبلية)
- 📱 تطبيق iOS و Android
- 🤖 نظام ذكي لتوصية الخدمات
- 📊 تحليلات متقدمة
- 🔗 API للربط مع أنظمة خارجية

## 📞 الدعم الفني

### للمساعدة التقنية
- راجع ملف `system_scenario.txt` للتفاصيل الكاملة
- تحقق من ملف `README_NEW_SYSTEM.md` للميزات الجديدة
- راجع ملف `database_schema.sql` لهيكل قاعدة البيانات

### للمشاكل
1. تحقق من سجلات الخطأ في XAMPP
2. تأكد من إعدادات قاعدة البيانات
3. تحقق من صلاحيات الملفات والمجلدات
4. راجع ملف `check_tables.php` للتأكد من صحة الجداول

## 📄 الترخيص

هذا المشروع مفتوح المصدر ومتاح للاستخدام التجاري والشخصي.

## 👥 فريق التطوير

تم تطوير هذا النظام بـ ❤️ لـ **Technology Innovation and Entrepreneurship Center (TIEC)**

---

**آخر تحديث**: ديسمبر 2024  
**الإصدار**: 2.0  
**الحالة**: مستقر ومُختبر 